{"version":3,"sources":["js/news-slider.js"],"names":["multiItemSlider","selector","config","_mainElement","_indicatorItems","document","querySelector","_sliderWrapper","_sliderItems","querySelectorAll","_wrapperWidth","parseFloat","getComputedStyle","width","_itemWidth","_html","innerHTML","_indexIndicator","_maxIndexIndicator","length","_positionLeftItem","_transform","_step","_items","_interval","_states","active","minWidth","count","_config","isCycling","direction","interval","pause","key","forEach","item","index","push","position","transform","_setActive","_index","body","clientWidth","arr","getItemMin","indexItem","getItemMax","getMin","getMax","_transformItem","nextItem","element","rect","vWidth","vHeight","elemFromPoint","currentIndicator","getBoundingClientRect","window","innerWidth","doc","documentElement","innerHeight","clientHeight","x","y","elementFromPoint","right","bottom","left","top","contains","style","classList","remove","add","_cycle","setInterval","_controlClick","e","target","preventDefault","clearInterval","getAttribute","to","i","_slideTo","parseInt","_handleVisibilityChange","visibilityState","_addIndicators","sliderIndicators","createElement","sliderIndicatorsItem","setAttribute","appendChild","addEventListener","_getActive","stop","cycle","slider"],"mappings":"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","file":"news-slider.93ecb5d6.js","sourceRoot":"../src","sourcesContent":["'use strict';\n    var multiItemSlider = (function () {\n\n      function _isElementVisible(element) {\n        var rect = element.getBoundingClientRect(),\n          vWidth = window.innerWidth || doc.documentElement.clientWidth,\n          vHeight = window.innerHeight || doc.documentElement.clientHeight,\n          elemFromPoint = function (x, y) { return document.elementFromPoint(x, y) };\n        if (rect.right < 0 || rect.bottom < 0\n          || rect.left > vWidth || rect.top > vHeight)\n          return false;\n        return (\n          element.contains(elemFromPoint(rect.left, rect.top))\n          || element.contains(elemFromPoint(rect.right, rect.top))\n          || element.contains(elemFromPoint(rect.right, rect.bottom))\n          || element.contains(elemFromPoint(rect.left, rect.bottom))\n        );\n      }\n\n      return function (selector, config) {\n        var\n          _mainElement = document.querySelector(selector),\n          _sliderWrapper = _mainElement.querySelector('.slider__inner'),\n          _sliderItems = _mainElement.querySelectorAll('.slider__item'),\n          _sliderControls = _mainElement.querySelectorAll('.slider__control'),\n          _sliderControlLeft = _mainElement.querySelector('.slider__control_left'),\n          _sliderControlRight = _mainElement.querySelector('.slider__control_right'),\n          _wrapperWidth = parseFloat(getComputedStyle(_sliderWrapper).width),\n          _itemWidth = parseFloat(getComputedStyle(_sliderItems[0]).width),\n          _html = _mainElement.innerHTML,\n          _indexIndicator = 0,\n          _maxIndexIndicator = _sliderItems.length - 1,\n          _indicatorItems,\n          _positionLeftItem = 0,\n          _transform = 0,\n          _step = _itemWidth / _wrapperWidth * 100,\n          _items = [],\n          _interval = 0,\n          _states = [\n            { active: false, minWidth: 0, count: 1 },\n            { active: false, minWidth: 576, count: 2 },\n            { active: false, minWidth: 992, count: 3 },\n            { active: false, minWidth: 1200, count: 4 },\n          ],\n          _config = {\n            isCycling: false,\n            direction: 'right',\n            interval: 4000,\n            pause: true\n          };\n\n        for (var key in config) {\n          if (key in _config) {\n            _config[key] = config[key];\n          }\n        }\n\n        _sliderItems.forEach(function (item, index) {\n          _items.push({ item: item, position: index, transform: 0 });\n        });\n\n        var _setActive = function () {\n          var _index = 0;\n          var width = parseFloat(document.body.clientWidth);\n          _states.forEach(function (item, index, arr) {\n            _states[index].active = false;\n            if (width >= _states[index].minWidth)\n              _index = index;\n          });\n          _states[_index].active = true;\n        }\n\n        var _getActive = function () {\n          var _index;\n          _states.forEach(function (item, index, arr) {\n            if (_states[index].active) {\n              _index = index;\n            }\n          });\n          return _index;\n        }\n\n        var position = {\n          getItemMin: function () {\n            var indexItem = 0;\n            _items.forEach(function (item, index) {\n              if (item.position < _items[indexItem].position) {\n                indexItem = index;\n              }\n            });\n            return indexItem;\n          },\n          getItemMax: function () {\n            var indexItem = 0;\n            _items.forEach(function (item, index) {\n              if (item.position > _items[indexItem].position) {\n                indexItem = index;\n              }\n            });\n            return indexItem;\n          },\n          getMin: function () {\n            return _items[position.getItemMin()].position;\n          },\n          getMax: function () {\n            return _items[position.getItemMax()].position;\n          }\n        }\n\n        var _transformItem = function (direction) {\n          var nextItem, currentIndicator = _indexIndicator;\n          if (!_isElementVisible(_mainElement)) {\n            return;\n          }\n          if (direction === 'right') {\n            _positionLeftItem++;\n            if ((_positionLeftItem + _wrapperWidth / _itemWidth - 1) > position.getMax()) {\n              nextItem = position.getItemMin();\n              _items[nextItem].position = position.getMax() + 1;\n              _items[nextItem].transform += _items.length * 100;\n              _items[nextItem].item.style.transform = 'translateX(' + _items[nextItem].transform + '%)';\n            }\n            _transform -= _step;\n            _indexIndicator = _indexIndicator + 1;\n            if (_indexIndicator > _maxIndexIndicator) {\n              _indexIndicator = 0;\n            }\n          }\n          if (direction === 'left') {\n            _positionLeftItem--;\n            if (_positionLeftItem < position.getMin()) {\n              nextItem = position.getItemMax();\n              _items[nextItem].position = position.getMin() - 1;\n              _items[nextItem].transform -= _items.length * 100;\n              _items[nextItem].item.style.transform = 'translateX(' + _items[nextItem].transform + '%)';\n            }\n            _transform += _step;\n            _indexIndicator = _indexIndicator - 1;\n            if (_indexIndicator < 0) {\n              _indexIndicator = _maxIndexIndicator;\n            }\n          }\n          _sliderWrapper.style.transform = 'translateX(' + _transform + '%)';\n          _indicatorItems[currentIndicator].classList.remove('active');\n          _indicatorItems[_indexIndicator].classList.add('active');\n        }\n\n        var _slideTo = function (to) {\n          var i = 0, direction = (to > _indexIndicator) ? 'right' : 'left';\n          while (to !== _indexIndicator && i <= _maxIndexIndicator) {\n            _transformItem(direction);\n            i++;\n          }\n        }\n\n        var _cycle = function (direction) {\n          if (!_config.isCycling) {\n            return;\n          }\n          _interval = setInterval(function () {\n            _transformItem(direction);\n          }, _config.interval);\n        }\n\n        var _controlClick = function (e) {\n          if (e.target.classList.contains('slider__control')) {\n            e.preventDefault();\n            var direction = e.target.classList.contains('slider__control_right') ? 'right' : 'left';\n            _transformItem(direction);\n            clearInterval(_interval);\n            _cycle(_config.direction);\n          }\n          if (e.target.getAttribute('data-slide-to')) {\n            e.preventDefault();\n            _slideTo(parseInt(e.target.getAttribute('data-slide-to')));\n            clearInterval(_interval);\n            _cycle(_config.direction);\n          }\n        };\n\n        var _handleVisibilityChange = function () {\n          if (document.visibilityState === \"hidden\") {\n            clearInterval(_interval);\n          } else {\n            clearInterval(_interval);\n            _cycle(_config.direction);\n          }\n        }\n\n        var _refresh = function () {\n          clearInterval(_interval);\n          _mainElement.innerHTML = _html;\n          _sliderWrapper = _mainElement.querySelector('.slider__wrapper');\n          _sliderItems = _mainElement.querySelectorAll('.slider__item');\n          _sliderControls = _mainElement.querySelectorAll('.slider__control');\n          _sliderControlLeft = _mainElement.querySelector('.slider__control_left');\n          _sliderControlRight = _mainElement.querySelector('.slider__control_right');\n          _wrapperWidth = parseFloat(getComputedStyle(_sliderWrapper).width);\n          _itemWidth = parseFloat(getComputedStyle(_sliderItems[0]).width);\n          _positionLeftItem = 0;\n          _transform = 0;\n          _indexIndicator = 0;\n          _maxIndexIndicator = _sliderItems.length - 1;\n          _step = _itemWidth / _wrapperWidth * 100;\n          _items = [];\n          _sliderItems.forEach(function (item, index) {\n            _items.push({ item: item, position: index, transform: 0 });\n          });\n          _addIndicators();\n        }\n\n        var _setUpListeners = function () {\n          _mainElement.addEventListener('click', _controlClick);\n          if (_config.pause && _config.isCycling) {\n            _mainElement.addEventListener('mouseenter', function () {\n              clearInterval(_interval);\n            });\n            _mainElement.addEventListener('mouseleave', function () {\n              clearInterval(_interval);\n              _cycle(_config.direction);\n            });\n          }\n\n          document.addEventListener('visibilitychange', _handleVisibilityChange, false);\n          window.addEventListener('resize', function () {\n            var\n              _index = 0,\n              width = parseFloat(document.body.clientWidth);\n            _states.forEach(function (item, index, arr) {\n              if (width >= _states[index].minWidth)\n                _index = index;\n            });\n            if (_index !== _getActive()) {\n              _setActive();\n              _refresh();\n            }\n          });\n        }\n\n        var _addIndicators = function () {\n          var sliderIndicators = document.createElement('ol');\n          sliderIndicators.classList.add('slider__indicators');\n          for (var i = 0; i < _sliderItems.length; i++) {\n            var sliderIndicatorsItem = document.createElement('li');\n            if (i === 0) {\n              sliderIndicatorsItem.classList.add('active');\n            }\n            sliderIndicatorsItem.setAttribute(\"data-slide-to\", i);\n            sliderIndicators.appendChild(sliderIndicatorsItem);\n          }\n          _mainElement.appendChild(sliderIndicators);\n          _indicatorItems = _mainElement.querySelectorAll('.slider__indicators > li')\n        }\n\n        // добавляем индикаторы\n        _addIndicators();\n        // инициализация\n        _setUpListeners();\n\n        if (document.visibilityState === \"visible\") {\n          _cycle(_config.direction);\n        }\n        _setActive();\n\n        return {\n          right: function () {\n            _transformItem('right');\n          },\n          left: function () {\n            _transformItem('left');\n          },\n          stop: function () {\n            _config.isCycling = false;\n            clearInterval(_interval);\n          },\n          cycle: function () {\n            _config.isCycling = true;\n            clearInterval(_interval);\n            _cycle();\n          }\n        }\n\n      }\n    }());\n\n    var slider = multiItemSlider('.slider', {\n      isCycling: true\n    });"]}